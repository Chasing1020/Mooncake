# Mooncake Architecture

Mooncake aims to enhance the inference efficiency of large language models (LLMs) and other scenarios, especially in slow object storage environments, by constructing a multi-level caching pool on high-speed interconnected DRAM/SSD resources. Compared to traditional caching, Mooncake's uniqueness lies in its ability to utilize (GPUDirect) RDMA technology to transfer data directly from the initiator's DRAM/VRAM to the receiver's DRAM/SSD in a zero-copy manner, while maximizing the use of multi-network card resources on a single machine.

- Provides object-level data storage services
- Supports multi-replication of data in the cache layer, with a lighter system design due to not guaranteeing absolute high availability
- Ensures the atomicity of object write operations, meaning Get will always read a complete set of data generated by a Put operation, but not necessarily the latest
- Supports striping and parallel I/O transfer for larger objects to utilize the aggregated bandwidth of multiple network cards
- Supports Eager/Lazy/None three modes for flushing slow object storage, corresponding to objects with high to low persistence requirements
- Supports dynamic addition and removal of cache resources

## Architectural Overview
![architecture](../../image/mooncake-store.png)
- Mooncake provides object-level operations such as Get/Put/List/Del, and also supports dynamically adjusting replication strategies according to user requirements (Replicate operations);
- Mooncake supports data transfer based on storage media such as VRAM/DRAM/NVMe SSD, while aiming to achieve zero-copy and multi-network card pooling data transfer. The corresponding logic has been abstracted into the Transfer Engine subsystem, which is now fully open-sourced;
- The Master node centrally manages the mapping relationships and space management policies of objects (Objects) to VRAM/DRAM/NVM buffers (Buffers). At the same time, the Master node drives Managed Pool Buffer nodes to achieve data transfer by calling relevant interfaces of the Transfer Engine;
- Managed Pool Buffer nodes mainly provide storage space, and all objects will eventually be written into the storage space allocated by such nodes according to specific rules.

> Mooncake has currently open-sourced the Transfer Engine subsystem, and updates are forthcoming!
